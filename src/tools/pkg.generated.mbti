// Generated using `moon info`, DON'T EDIT IT
package "mizchi/llm/tools"

// Values
pub fn clamp(Int, Int, Int) -> Int

pub fn count_occurrences(String, String) -> Int

pub fn guard_command(String, Bool) -> String?

pub fn normalize_path(String) -> String

pub fn optional_int(Json, String) -> Int?

pub fn optional_string(Json, String) -> String?

pub fn required_string(Json, String) -> String?

pub fn resolve_path(String, String?) -> Result[String, String]

pub fn validate_params(Json, Json) -> Array[String]

pub fn validate_tool_input(Json, Json) -> Array[String]

pub fn validate_url(String) -> Result[Unit, String]

pub fn web_fetch_result_json(String, String, Int, String, String, Bool) -> String

// Errors

// Types and methods
pub(all) struct SchemaBuilder {
  properties : Map[String, Json]
  required : Array[String]
}
pub fn SchemaBuilder::array(Self, String, String, String, required? : Bool) -> Self
pub fn SchemaBuilder::boolean(Self, String, String, required? : Bool) -> Self
pub fn SchemaBuilder::build(Self) -> Json
pub fn SchemaBuilder::integer(Self, String, String, required? : Bool) -> Self
pub fn SchemaBuilder::new() -> Self
pub fn SchemaBuilder::number(Self, String, String, required? : Bool) -> Self
pub fn SchemaBuilder::string(Self, String, String, required? : Bool) -> Self
pub fn SchemaBuilder::string_enum(Self, String, String, Array[String], required? : Bool) -> Self

pub(all) enum ToolChoice {
  Auto
  None
  Required
  Specific(String)
}

pub(all) struct ToolDef {
  name : String
  description : String
  input_schema : Json
}
pub fn ToolDef::new(String, String, Json) -> Self
pub fn ToolDef::to_anthropic_json(Self) -> Json
pub fn ToolDef::to_openai_json(Self) -> Json

pub(all) enum ToolExecuteError {
  ToolNotFound(String)
  InvalidParams(tool_name~ : String, errors~ : Array[String])
}
pub fn ToolExecuteError::to_message(Self) -> String

pub(all) struct ToolRegistry {
  tools : Array[ToolDef]
  handlers : Map[String, (Json) -> String]
}
pub fn ToolRegistry::definitions(Self) -> Array[Json]
pub fn ToolRegistry::execute(Self, String, Json) -> (String, Bool)
pub fn ToolRegistry::execute_result(Self, String, Json) -> Result[String, ToolExecuteError]
pub fn ToolRegistry::execute_validated(Self, String, Json) -> (String, Bool)
pub fn ToolRegistry::get_defs(Self) -> Array[ToolDef]
pub fn ToolRegistry::has(Self, String) -> Bool
pub fn ToolRegistry::new() -> Self
pub fn ToolRegistry::register(Self, String, String, Json, (Json) -> String) -> Unit
pub fn ToolRegistry::register_def(Self, ToolDef, (Json) -> String) -> Unit

// Type aliases

// Traits

